<?xml version="1.0" encoding="UTF-8"?>
<id-provider xmlns="urn:enonic:xp:model:1.0">
  <mode>MIXED</mode>
  <form>
    <field-set>
      <label>Authorization Server</label>
      <items>
        <input name="issuer" type="TextLine">
          <label>Issuer Identifier</label>
          <help-text>Case sensitive URL using the https scheme that contains scheme, host, and optionally, port number and path components
            and no query or fragment components
          </help-text>
          <default>https://accounts.google.com</default>
          <occurrences minimum="1" maximum="1"/>
        </input>
        <input name="authorizationUrl" type="TextLine">
          <label>Authorization endpoint URL</label>
          <help-text>Authorization endpoint URL of the authorization server</help-text>
          <default>https://accounts.google.com/o/oauth2/v2/auth</default>
          <occurrences minimum="1" maximum="1"/>
        </input>
        <input name="tokenUrl" type="TextLine">
          <label>Token endpoint URL</label>
          <help-text>Token endpoint URL of the authorization server</help-text>
          <default>https://oauth2.googleapis.com/token</default>
          <occurrences minimum="1" maximum="1"/>
        </input>
        <item-set name="endSession">
          <label>End Session - Draft feature</label>
          <help-text>Specify if available and if the user should be logged out of the authorization server as well</help-text>
          <items>
            <input name="url" type="TextLine">
              <label>End session URL</label>
              <help-text>End session endpoint URL of the authorization server</help-text>
              <default></default>
              <occurrences minimum="1" maximum="1"/>
            </input>
            <field-set>
              <label>Parameters Names</label>
              <items>
                <input name="postLogoutRedirectUriKey" type="TextLine">
                  <label>Post Logout Redirect URI parameter name</label>
                  <default>post_logout_redirect_uri</default>
                  <occurrences minimum="1" maximum="1"/>
                </input>
              </items>
            </field-set>
            <item-set name="additionalParameters">
              <label>Additional Parameters</label>
              <items>
                <input name="key" type="TextLine">
                  <label>Key</label>
                  <occurrences minimum="1" maximum="1"/>
                </input>
                <input name="value" type="TextLine">
                  <label>Value</label>
                  <occurrences minimum="1" maximum="1"/>
                </input>
              </items>
              <occurrences minimum="0" maximum="0"/>
            </item-set>

          </items>
          <occurrences minimum="0" maximum="1"/>
        </item-set>


      </items>
    </field-set>
    <field-set>
      <label>Client</label>
      <items>
        <input name="clientId" type="TextLine">
          <label>Client Identifier</label>
          <help-text>OAuth 2.0 Client Identifier</help-text>
          <occurrences minimum="1" maximum="1"/>
        </input>
        <input name="clientSecret" type="TextLine">
          <label>Client Secret</label>
          <help-text>Client secret</help-text>
          <occurrences minimum="1" maximum="1"/>
        </input>
      </items>
    </field-set>
    <field-set>
      <label>User Creation</label>
      <items>
        <input name="defaultGroups" type="PrincipalSelector">
          <label>Default groups</label>
          <help-text>Groups associated with users upon user creation</help-text>
          <occurrences minimum="0" maximum="0"/>
          <config>
            <principalType>GROUP</principalType>
          </config>
        </input>
      </items>
    </field-set>

  </form>
</id-provider>
